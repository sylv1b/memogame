(this.webpackJsonpmemory=this.webpackJsonpmemory||[]).push([[0],{30:function(e,t,r){},56:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),i=r(21),a=r.n(i),o=r(7),s=r(6),l=r(2),d=r(22),j=r.n(d),h=r(0);function u(e){var t=e.image,r=e.size,n=e.fliped,c=e.onClick,i=e.clickDisabled;return Object(h.jsx)("div",{onClick:n?null:c,style:{width:"".concat(r,"px"),height:"".concat(r,"px"),cursor:i||n?"default":"pointer"},className:"card-container",children:Object(h.jsxs)(j.a,{isFlipped:!n,children:[Object(h.jsx)("img",{src:t.path,width:r,height:r,alt:"Thanks for picking me!"}),Object(h.jsx)("img",{src:"./images/flipped.jpg",width:r,height:r,alt:"Pick me please!"})]})})}var b=function(){var e=Object(n.useState)({width:0,height:0}),t=Object(l.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){function e(){c({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),r};function m(e){var t=e.tries,r=e.found,n=e.numOfClicks;return Object(h.jsx)("div",{className:"score",children:t?"".concat(t," ").concat(t>1?"tries":"try"," - ").concat(r.length," pair found"):0===n?"Pick a card!":"Pick another card!"})}var O=c.a.memo(m),f=function(e){var t=e.memoData,r=e.onTryAgain,c=e.onSaveGame,i=Object(n.useState)(0),a=Object(l.a)(i,2),o=a[0],d=a[1],j=Object(n.useState)([]),m=Object(l.a)(j,2),f=m[0],g=m[1],p=Object(n.useState)([]),v=Object(l.a)(p,2),x=v[0],y=v[1],w=Object(n.useState)(!1),S=Object(l.a)(w,2),C=S[0],k=S[1],T=Object(n.useState)(!1),_=Object(l.a)(T,2),D=_[0],E=_[1],I=Object(n.useState)(0),P=Object(l.a)(I,2),F=P[0],L=P[1],Y=Object(n.useState)(!0),z=Object(l.a)(Y,2),M=z[0],A=z[1];Object(n.useEffect)((function(){C&&M&&(A(!1),c(o/2,x.length))}),[x,M,o,c,C]);var B=b().width;return Object(n.useEffect)((function(){if(2===f.length&&t[f[0]].id===t[f[1]].id){var e=Object(s.a)(x);e.push(t[f[0]].id),y(e)}t.length&&t.length/2===x.length?k(!0):k(!1)}),[f]),Object(h.jsxs)("div",{style:{textAlign:"center"},children:[Object(h.jsx)(O,{tries:F,found:x,numOfClicks:o}),Object(h.jsx)("div",{className:"memory-container",style:{width:B>900?900:B},children:t.map((function(e){return Object(h.jsx)(u,{image:e,size:B>900?200:B/4-(t.length+10),fliped:x.includes(e.id)||f.includes(e.index),onClick:function(){return function(e,t){if(!D){if(o%2===0)g([t]);else{E(!0);var r=Object(s.a)(f);r.push(t),g(r),L(F+1),setTimeout((function(){g([]),E(!1)}),800)}d(o+1)}}(e.id,e.index)},clickDisabled:D},"card-".concat(e.id,"-").concat(e.index))}))}),C&&Object(h.jsx)("button",{onClick:function(){return d(0),g([]),y([]),k(!1),E(!1),L(0),r(),void A(!0)},children:"You won! Try again"})]})},g=c.a.memo(f),p=function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=[e[r],e[t]];e[t]=n[0],e[r]=n[1]}return e},v=(r(30),[{path:"images/rollercoaster/01.jpg",theme:["rollercoaster"],id:"001"},{path:"images/rollercoaster/02.jpg",theme:["rollercoaster"],id:"002"},{path:"images/rollercoaster/03.jpg",theme:["rollercoaster"],id:"003"},{path:"images/rollercoaster/04.jpg",theme:["rollercoaster"],id:"004"},{path:"images/rollercoaster/05.jpg",theme:["rollercoaster"],id:"005"},{path:"images/rollercoaster/06.jpg",theme:["rollercoaster"],id:"006"},{path:"images/rollercoaster/07.jpg",theme:["rollercoaster"],id:"007"},{path:"images/rollercoaster/08.jpg",theme:["rollercoaster"],id:"008"},{path:"images/rollercoaster/09.jpg",theme:["rollercoaster"],id:"009"},{path:"images/rollercoaster/10.jpg",theme:["rollercoaster"],id:"010"},{path:"images/rollercoaster/11.jpg",theme:["rollercoaster"],id:"011"},{path:"images/rollercoaster/12.jpg",theme:["rollercoaster"],id:"012"},{path:"images/rollercoaster/13.jpg",theme:["rollercoaster"],id:"013"},{path:"images/rollercoaster/14.jpg",theme:["rollercoaster"],id:"014"},{path:"images/rollercoaster/15.jpg",theme:["rollercoaster"],id:"015"},{path:"images/rollercoaster/16.jpg",theme:["rollercoaster"],id:"016"}]),x=r(23),y=r.n(x).a.create({baseURL:__DEV__?"http://localhost:5001":"https://memo-api.captain.brochard.se",timeout:1e3,headers:{"X-Custom-Header":"foobar"}});var w=function(e){var t=e.title,r=e.value,n=e.placeholder,c=e.error,i=e.onChange;return Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(h.jsx)("h3",{children:t}),Object(h.jsx)("input",{type:"text",value:r,onChange:i,placeholder:n,style:{height:40,padding:8,borderRadius:8}}),c&&Object(h.jsx)("div",{style:{color:"red",fontSize:"0.8em",marginTop:4},children:c})]})};function S(e){var t=e.title,r=e.onClick;return Object(h.jsx)("button",{type:"button",onClick:r,style:{width:"100%"},children:t})}var C=r(24),k=r.n(C);var T=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),r=t[0],c=t[1],i=Object(n.useState)(""),a=Object(l.a)(i,2),d=a[0],j=(a[1],Object(n.useState)([])),u=Object(l.a)(j,2),b=u[0],m=u[1],O=Object(n.useState)(8),f=Object(l.a)(O,2),x=f[0],C=(f[1],Object(n.useState)(!0)),T=Object(l.a)(C,2),_=T[0],D=T[1],E=Object(n.useState)(null),I=Object(l.a)(E,2),P=I[0],F=I[1],L=Object(n.useState)(null),Y=Object(l.a)(L,2),z=Y[0],M=Y[1],A=Object(n.useState)(""),B=Object(l.a)(A,2),H=B[0],N=B[1],G=Object(n.useState)(""),J=Object(l.a)(G,2),R=J[0],U=J[1],V=Object(n.useState)([]),W=Object(l.a)(V,2),X=W[0],q=W[1];Object(n.useEffect)((function(){var e=localStorage.getItem("userId");e?function(e){return y.get("/user/".concat(e))}(e).then((function(e){F(e.data)})):c(!1)}),[]);var K=function(){var e;(e=P._id,y.get("/game/user/".concat(e))).then((function(e){M(e.data.sort((function(e,t){return e.numberOfTries-t.numberOfTries}))),c(!1)})),y.get("/game/leatherboard").then((function(e){return q(e.data)}))};Object(n.useEffect)((function(){P&&K()}),[P]),Object(n.useEffect)((function(){if(_){D(!1);var e=Object(s.a)(v),t=d?e.filter((function(e){return e.theme.includes(d)})):e;t=p(t).splice(0,x<=t.length?x:t.length),t=p(t.concat(t)),m(t.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{index:t})})))}}),[d,_,x]);var Q=Object(h.jsx)("div",{style:{display:"flex",width:"100%",minHeight:"100vh",justifyContent:"center",alignItems:"center"},children:"Loading..."}),Z=Object(h.jsx)("div",{id:"main-container",children:Object(h.jsx)("div",{style:{display:"flex",width:"100%",minHeight:"100vh",justifyContent:"center",alignItems:"center"},children:Object(h.jsxs)("div",{children:[Object(h.jsx)(w,{title:"Your name",placeholder:"Enter your name",error:R,onChange:function(e){return N(e.target.value)}}),Object(h.jsx)(S,{title:"Play",onClick:function(){c(!0),function(e){return y.post("/user",{user:e})}(H).then((function(e){F(e.data),localStorage.setItem("userId",e.data._id)})).catch((function(e){U(e.response.data),c(!1)}))}})]})})});return Object(h.jsx)("div",{id:"main-container",children:r?Q:P?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"The memory game"}),z.length&&Object(h.jsxs)("h3",{children:["Your best score: ",z[0].numberOfTries," tries"]}),Object(h.jsx)("h5",{children:"Find pairs of cards"}),Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(h.jsxs)("div",{style:{width:200},children:[Object(h.jsx)("h3",{children:"Your best scores"}),z.length?z.map((function(e){return Object(h.jsxs)("div",{children:[k()(e.createdAt).format("YY-MM-DD"),": ",e.numberOfTries," tries"]},e._id)})):Object(h.jsx)("div",{children:"Play your first game"})]}),Object(h.jsx)("div",{id:"content",children:Object(h.jsx)(g,{memoData:b,onTryAgain:function(){D(!0)},onSaveGame:function(e,t){var r;(r={userId:P._id,numberOfPairs:t,numberOfTries:e},y.post("/game",Object(o.a)({},r))).then((function(){return K()}))}})}),Object(h.jsxs)("div",{style:{width:200},children:[Object(h.jsx)("h3",{children:"LeatherBoard"}),X.length?X.map((function(e,t){var r=e._id===P._id;return Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"row",color:e._id===P._id?"red":null,marginBottom:8},children:[t+1," - ",r?Object(h.jsx)("div",{children:"You"}):e.name,": ",e.numberOfTries," tries"]},e._id)})):Object(h.jsx)("div",{children:"No one has playd the game yet"})]})]})]}):Z})},_=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,57)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;r(e),n(e),c(e),i(e),a(e)}))};a.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(T,{})}),document.getElementById("root")),_()}},[[56,1,2]]]);
//# sourceMappingURL=main.699c1d62.chunk.js.map